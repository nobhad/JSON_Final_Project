// File: /routes/bookingRoutes.js  
// Purpose: Defines routes for displaying and handling service booking form

const express = require('express');
const router = express.Router();
const bookingController = require('../controllers/bookingController');

// middleware to protect booking routes
function ensureAuthenticated(req, res, next) {
  if (req.session && req.session.userId) {
    return next();
  }
  res.redirect('/login');
}

router.get('/book', ensureAuthenticated, bookingController.showBookingForm);
router.post('/book', ensureAuthenticated, bookingController.submitBooking);

module.exports = router;
