<!--
  File: /views/testimonials/list.ejs
  Purpose: Display a list of testimonials
  Notes:
  - `testimonials` array passed from route
  - Uses global `user` variable from res.locals.user
  - Show "Add New Testimonial" link only if user is logged in
-->

<main>
  <h1>Client Testimonials</h1>

  <% if (testimonials && testimonials.length > 0) { %>
    <div class="testimonial-grid">
      <% testimonials.forEach(testimonial => { %>
        <div class="testimonial-card">
          <h2><%= testimonial.title %></h2>
          <% if (testimonial.image) { %>
            <img src="/uploads/<%= testimonial.image %>" alt="Image for testimonial" class="testimonial-image" />
          <% } %>
          <div><%- testimonial.content %></div>
        </div>
      <% }) %>
    </div>
  <% } else { %>
    <p>No testimonials found.</p>
  <% } %>

  <% if (user) { %>
    <a href="/testimonials/new" class="btn-link">Leave a Testimonial</a>
  <% } %>
</main>
