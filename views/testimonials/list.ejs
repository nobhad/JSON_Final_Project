<!--
  File: /views/testimonials/list.ejs
  Purpose: Display a list of testimonials
  Notes:
  - `testimonials` array passed from route
  - Uses global `user` variable from res.locals.user
  - Show "Add New Testimonial" link only if user is logged in
-->

<main>
  <h1>Client Testimonials</h1>

  <% if (testimonials && testimonials.length > 0) { %>
    <div class="testimonial-list">
      <% testimonials.forEach(testimonial => { %>
        <div class="testimonial-item">
          <h2><%= testimonial.title %></h2>
          <% if (testimonial.image) { %>
            <img src="/uploads/<%= testimonial.image %>" alt="Image for testimonial" width="200" />
          <% } %>   
          <div><%- testimonial.content %></div>       
        </div>
      <% }) %>
    </div>
  <% } else { %>
    <p>No testimonials found.</p>
  <% } %>

  <% if (user) { %>
    <a href="/testimonials/new">Leave a Testimonial</a>
  <% } %>
</main>

<style>
  /* remove bullet styling */
  .testimonial-list {
    padding: 0;
    margin: 0;
  }
  .testimonial-item {
    margin-bottom: 2em;
    border-bottom: 1px solid #ccc;
    padding-bottom: 1em;
  }
</style>
